---
jupyter:
  jupytext:
    formats: ipynb,Rmd
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.3.2
  kernelspec:
    display_name: Python 3
    language: python
    name: python3
---

```{python}
# %load_ext autoreload
# %autoreload 2
import pandas as pd
import time
import matplotlib.pyplot as plt
import numpy as np
import brightway2 as bw

# Custom utils defined for inter-acv
from utils import *
from expression import *
```

```{python}
# Reset project & DB
bw.projects.set_current('B_Publication')
resetDb()
resetParams()
```

```{python}
alpha = newParamDef(
    'alpha', 
    ParamType.NUMBER, 
    default=0.5, 
    description="alpha")

beta = newParamDef(
    'beta', 
    ParamType.NUMBER, 
    default=0.5, 
    description="beta")

# Define parameters of the model
elect_switch_param = newParamDef(
    'elect_switch_param', 
    ParamType.ENUM, 
    values=["us", "glo"], 
    default="us", 
    description="Switch on electricty mix")
```

```{python}
# Select impacts
impacts = [m for m in bw.methods if 'ILCD 1.0.8 2016' in str(m) and 'no LT' in str(m)]
```

```{python}
occup = findBio('Occupation, industrial area')
heat = findBio('Heat, waste', categories=['air'])
heat.__dict__
```

```{python}
# Create new, parametrized activity

activity1 = newActivity(
    name="act1", unit="kg", 
    exchanges= {
        occup:3, 
        heat: alpha})

activity2 = newActivity(
    name="act2", unit="kg", 
    exchanges= {
        activity1: beta * 5 + alpha, # Nested activity with parametrized amount
        heat:7}) # Constant exhange
```

```{python}
print_act(activity1)
```

```{python}
print_act(activity2)
```

```{python}
elec_switch_activity = switch(
    elect_switch_param, dict(
        us=us_elec, 
        glo=glo_elec))

print_act(elec_switch_activity)
```

```{python}
computeLCA(activity2, impacts, alpha=4, beta=0.8)
```

```{python}

```
